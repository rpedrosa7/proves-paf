<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dispositiu Proves Finals - UOC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        
        :root {
            --uoc-blue: #000078;
            --uoc-sky: #73edff;
            --uoc-sand: #ffc0a0;
            --uoc-orange: #ff6a13;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            scroll-behavior: smooth;
        }

        .floor-card {
            height: 150px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border-radius: 1.25rem;
            border: 2px solid white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            background-color: #e2e8f0;
        }

        .floor-card .bg-image {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8) saturate(1.1);
            transition: all 0.6s ease;
            z-index: 0;
        }

        .floor-card .overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,50,0.85) 0%, rgba(0,0,50,0.2) 60%, transparent 100%);
            z-index: 1;
            transition: all 0.4s ease;
        }

        .floor-active {
            height: 170px;
            border-color: var(--uoc-sky);
            transform: scale(1.03);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 120, 0.2);
        }

        .floor-active .bg-image {
            filter: brightness(1) saturate(1.3);
            transform: scale(1.05);
        }

        .data-accordion-card {
            transition: all 0.4s ease;
            cursor: pointer;
            background-color: var(--uoc-blue);
            max-height: 60px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .data-active {
            max-height: 2000px;
            background-color: #00005a;
        }

        .data-content {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .data-active .data-content {
            opacity: 1;
            transform: translateY(0);
            margin-top: 1rem;
        }

        .dashboard-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            padding: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 48px;
        }

        .status-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(0.9); opacity: 0.5; }
            70% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(0.9); opacity: 0.5; }
        }

        .flow-line {
            position: relative;
            padding-left: 1.5rem;
            border-left: 1px dashed rgba(115, 237, 255, 0.3);
        }
        .flow-dot {
            position: absolute;
            left: -4px;
            top: 0.5rem;
            width: 7px;
            height: 7px;
            border-radius: 999px;
            background-color: var(--uoc-sky);
        }

        .uoc-logo {
            height: 48px;
            width: auto;
            display: block;
        }

        .zone-accordion {
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            overflow: hidden;
            background: white;
            transition: all 0.3s ease;
            margin-bottom: 0.75rem;
        }

        .zone-header {
            padding: 1.25rem 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8fafc;
            user-select: none;
        }

        .zone-header:hover {
            background: #f1f5f9;
        }

        .zone-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: white;
        }

        .zone-open .zone-body {
            max-height: 2000px;
            border-top: 1px solid #f1f5f9;
        }

        .zone-open .chevron-icon {
            transform: rotate(180deg);
        }

        .service-card {
            background: #fbfcfd;
            border: 1px solid #edf2f7;
            border-radius: 0.75rem;
            padding: 1.25rem;
            transition: transform 0.2s ease;
        }

        .service-card:hover {
            transform: translateY(-2px);
            border-color: var(--uoc-sky);
        }

        .animate-fadeIn {
            animation: fadeIn 0.4s ease forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <header class="bg-white border-b-4 border-[#000078] sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <img src="logo.png" alt="UOC" class="uoc-logo" onerror="this.src='https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Logo_UOC.svg/2560px-Logo_UOC.svg.png'">
            </div>
            <div id="real-time-clock" class="font-mono text-sm font-bold text-[#000078] bg-slate-100 px-4 py-2 rounded-full border border-slate-200">
                00:00:00
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <!-- Columna Esquerra: Estadístiques i Navegació -->
        <div class="lg:col-span-4 space-y-4">
            
            <div class="space-y-3">
                <!-- PAF EN XIFRES -->
                <section id="paf-stats" class="data-accordion-card rounded-2xl p-4 text-white shadow-lg" onclick="toggleAccordion('paf-stats')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-chart-pie text-uoc-sky"></i>
                            <h3 class="text-[11px] font-black uppercase tracking-widest">PAF en xifres</h3>
                        </div>
                        <i class="fas fa-chevron-down text-[10px] opacity-50"></i>
                    </div>
                    
                    <div class="data-content pt-2 space-y-4">
                        <div class="px-1 pt-2">
                            <h2 class="text-[10px] font-black text-[#73edff] uppercase tracking-[0.15em] italic">01. CONTEXT GLOBAL</h2>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div class="dashboard-item">
                                <p class="text-[6px] text-white/40 uppercase">Programes</p>
                                <p class="text-[11px] font-bold">1.120</p>
                            </div>
                            <div class="dashboard-item">
                                <p class="text-[6px] text-white/40 uppercase">Assignatures</p>
                                <p class="text-[11px] font-bold">3.700</p>
                            </div>
                            <div class="dashboard-item">
                                <p class="text-[6px] text-white/40 uppercase">Estudiants</p>
                                <p class="text-[11px] font-bold">80.000</p>
                            </div>
                            <div class="dashboard-item">
                                <p class="text-[6px] text-white/40 uppercase">Assignacions</p>
                                <p class="text-[11px] font-bold">247.000</p>
                            </div>
                        </div>

                        <div class="px-1 pt-2 border-t border-white/10">
                            <h2 class="text-[10px] font-black text-[#73edff] uppercase tracking-[0.15em] italic">02. MODELS D'AVALUACIÓ</h2>
                        </div>
                        <div class="bg-white/5 p-3 rounded-xl space-y-2 border border-white/10">
                            <div class="flex justify-between items-center bg-white/5 p-2 rounded-lg">
                                <span class="text-[10px] font-bold uppercase text-white/60">Sense prova final</span>
                                <span class="text-[12px] font-black italic text-white/60">61%</span>
                            </div>
                            <div class="flex justify-between items-center bg-uoc-sky/20 p-2 rounded-lg border border-uoc-sky/30">
                                <span class="text-[10px] font-bold uppercase">Amb prova final (PAF)</span>
                                <span class="text-[12px] font-black italic">39%</span>
                            </div>
                        </div>

                        <div class="flow-line space-y-3">
                            <div class="relative">
                                <div class="flow-dot"></div>
                                <p class="text-[10px] font-bold text-white/80">Del 39% amb PAF:</p>
                                <div class="grid grid-cols-1 gap-2 mt-1">
                                    <div class="bg-white/5 p-2 rounded-lg flex justify-between items-center">
                                        <p class="text-[8px] text-white/40 uppercase">Superen AC (Exempts)</p>
                                        <p class="text-[10px] font-bold">20%</p>
                                    </div>
                                    <div class="bg-white/5 p-2 rounded-lg flex justify-between items-center">
                                        <p class="text-[8px] text-white/40 uppercase">No aproven AC (Sense dret)</p>
                                        <p class="text-[10px] font-bold">8%</p>
                                    </div>
                                </div>
                            </div>
                            <div class="relative">
                                <div class="flow-dot" style="background-color: #fff;"></div>
                                <p class="text-[11px] font-black text-uoc-sky uppercase italic text-center py-1">72% han de fer la prova</p>
                            </div>
                        </div>

                        <div class="px-1 pt-2 border-t border-white/10">
                            <h2 class="text-[10px] font-black text-[#73edff] uppercase tracking-[0.15em] italic">03. PROVES FINALS</h2>
                        </div>
                        <div class="bg-uoc-sky/10 border border-uoc-sky/30 p-3 rounded-xl text-center mb-4">
                            <p class="text-xl font-black italic">67.750</p>
                            <p class="text-[6px] text-uoc-sky uppercase font-bold">Proves convocades</p>
                        </div>
                        <div class="grid grid-cols-1 gap-2">
                            <div class="bg-white/5 p-2 rounded-lg flex justify-between items-center">
                                <p class="text-[8px] text-white/60 uppercase">Tradicionals síncrones</p>
                                <p class="text-[10px] font-bold">46.000</p>
                            </div>
                            <div class="bg-white/5 p-2 rounded-lg flex justify-between items-center">
                                <p class="text-[8px] text-white/60 uppercase">Canvas asíncrones</p>
                                <p class="text-[10px] font-bold">16.250</p>
                            </div>
                            <div class="bg-white/5 p-2 rounded-lg flex justify-between items-center border border-white/5">
                                <p class="text-[8px] text-white/60 uppercase">Presencials FP</p>
                                <p class="text-[10px] font-bold">5.500</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- QUADRE DE COMANDAMENT -->
                <section id="dashboard" class="data-accordion-card rounded-2xl p-4 text-white shadow-lg" onclick="toggleAccordion('dashboard')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-th-large text-uoc-sky"></i>
                            <h3 class="text-[11px] font-black uppercase tracking-widest">Quadre de comandament</h3>
                        </div>
                        <i class="fas fa-chevron-down text-[10px] opacity-50"></i>
                    </div>
                    <div class="data-content pt-2">
                        <div class="grid grid-cols-3 gap-2">
                            <!-- Columna Procés -->
                            <div class="space-y-2">
                                <p class="text-[7px] font-black text-uoc-sky uppercase text-center mb-1">Procés</p>
                                <div class="dashboard-item">
                                    <p class="text-[5px] text-white/40 uppercase">Proves convocades</p>
                                    <p class="text-[10px] font-bold">67.750</p>
                                </div>
                                <div class="dashboard-item">
                                    <p class="text-[5px] text-white/40 uppercase">% proves lliurades</p>
                                    <p class="text-[10px] font-bold">32%</p>
                                </div>
                            </div>
                            <!-- Columna Atenció -->
                            <div class="space-y-2">
                                <p class="text-[7px] font-black text-uoc-sky uppercase text-center mb-1">Atenció</p>
                                <div class="dashboard-item">
                                    <p class="text-[5px] text-white/40 uppercase">Casos</p>
                                    <p class="text-[10px] font-bold">5.467</p>
                                </div>
                                <div class="dashboard-item">
                                    <p class="text-[5px] text-white/40 uppercase">Satisfacció CSAT</p>
                                    <p class="text-[10px] font-bold">95%</p>
                                </div>
                            </div>
                            <!-- Columna Tecnologia -->
                            <div class="space-y-2">
                                <p class="text-[7px] font-black text-uoc-sky uppercase text-center mb-1">Tecnologia</p>
                                <div class="dashboard-item">
                                    <p class="text-[5px] text-white/40 uppercase">Uptime</p>
                                    <p class="text-[10px] font-bold">99.9%</p>
                                </div>
                                <div class="dashboard-item">
                                    <p class="text-[5px] text-white/40 uppercase">Sistemes</p>
                                    <div class="flex items-center space-x-1">
                                        <p class="text-[10px] font-bold">OK</p>
                                        <div class="w-1 h-1 bg-green-400 rounded-full status-pulse"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <div class="pt-2">
                <h2 class="text-[10px] font-black text-slate-400 uppercase mb-4 tracking-[0.2em] px-2 text-center lg:text-left">Explora els espais</h2>
                <div id="floor-list" class="space-y-4"></div>
            </div>
        </div>

        <!-- Columna Dreta: Detalls de l'espai -->
        <div class="lg:col-span-8">
            <div id="content-area" class="bg-white rounded-3xl shadow-sm border border-slate-200 min-h-[650px] p-6 md:p-10 flex flex-col relative transition-all duration-500 overflow-hidden">
                <div id="default-view" class="h-full flex flex-col items-center justify-center text-center space-y-6 py-20">
                    <div class="w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center border border-slate-100">
                        <i class="fas fa-map-marked-alt text-slate-200 text-3xl"></i>
                    </div>
                    <div>
                        <h2 class="text-[#000078] font-black text-xl uppercase tracking-tight mb-2">Benvingut a l'itinerari</h2>
                        <p class="text-slate-400 text-sm max-w-sm mx-auto">Seleccioneu un espai per veure'n els detalls i la informació del dispositiu.</p>
                    </div>
                </div>
                <div id="dynamic-view" class="hidden h-full"></div>
            </div>
        </div>
    </main>

    <script>
        const buildingData = {
            'O': { 
                label: "Seu Central", 
                title: "Edifici O", 
                subtitle: null,
                icon: "fa-clipboard-list", 
                image: "edifici_o.jpg", 
                layout: 'accordion',
                zones: [
                    {
                        id: "z-mar",
                        name: "Zona Mar",
                        icon: "fa-water",
                        services: [
                            { 
                                title: "Serveis acadèmics", 
                                description: "Coordina els equips implicats, prepara tota la logística i fa el seguiment en temps real del desenvolupament de les proves. Dona resposta a incidències i dubtes de segon nivell per garantir que l’avaluació final es desenvolupi amb rigor i fluïdesa." 
                            },
                            { title: "Tecnologia", description: "(Definició pendent d'assignar)" },
                            { title: "Atenció a l'estudiant", description: "Acompanya als estudiants durant la realització de les proves per atendre les seves peticions de suport a través del xat, el telèfon i l'entorn virtual. Informa als estudiants sobre les qüestions que els hi puguin afectar durant la realització de les proves." },
                            { title: "Gestió de programes", description: "Activa dues línies de suport: una per als estudis i una altra per a l’operatiu de gestió. Ofereix suport tècnic síncron i no presencial als equips de PDI de guàrdia, per resoldre incidències i garantir el seguiment de les indicacions. En paral·lel, dona suport presencial a l’operatiu amb dos persones al matí i dos a la tarda, que supervisen el dispositiu i faciliten la coordinació amb els equips online." },
                            { 
                                title: "Atenció xat - Extern", 
                                description: "Acompanya als estudiants durant la realització de les proves per atendre els seus dubtes sobre el contenido de l'enunciat través de les sales de xat per assignatura. En cas necessari deriven el dubte a l'equip de guàrdia del professorat per confirmar la resolució i respondre a l'estudiant." 
                            }
                        ]
                    },
                    {
                        id: "z-muntanya",
                        name: "Zona Muntanya",
                        icon: "fa-mountain",
                        services: [
                            { 
                                title: "Atenció 2n nivell - Extern", 
                                description: "Equip que resol los casos derivats pel primer nivell d'atenció telefònic i que tenen a veure amb problemàtiques amb l'accés a l'enunciat o la pujada de l'arxiu de la prova. Dins d'aquest equip també hi ha un dispositiu dedicat a donar suport de segon nivell a les incidències o dubtes de les proves asíncrones a Canvas." 
                            }
                        ]
                    }
                ]
            },
            'U': { 
                label: "Zona Grafana", 
                title: "Edifici U", 
                subtitle: "Suport Extern",
                icon: "fa-network-wired", 
                image: "edifici_c.jpg", 
                layout: 'simple',
                services: [
                    { 
                        title: "Atenció Grafana", 
                        description: "Monitoritza les incidències en la captació d'imatges per la validació de la identitat durant les proves i contacta proactivament amb l'estudiant per resoldre-les." 
                    }
                ] 
            }
        };

        function toggleAccordion(id) {
            const el = document.getElementById(id);
            if(el) el.classList.toggle('data-active');
        }

        function toggleZone(zoneId) {
            const el = document.getElementById(zoneId);
            const isOpen = el.classList.contains('zone-open');
            document.querySelectorAll('.zone-accordion').forEach(acc => acc.classList.remove('zone-open'));
            if (!isOpen) el.classList.add('zone-open');
        }

        function selectFloor(id) {
            const data = buildingData[id];
            const dynamicView = document.getElementById('dynamic-view');
            const defaultView = document.getElementById('default-view');
            const contentArea = document.getElementById('content-area');

            document.querySelectorAll('.floor-card').forEach(c => c.classList.remove('floor-active'));
            const activeBtn = document.getElementById(`floor-btn-${id}`);
            if (activeBtn) activeBtn.classList.add('floor-active');

            defaultView.classList.add('hidden');
            dynamicView.classList.remove('hidden');

            let contentHTML = '';
            
            if (data.layout === 'accordion') {
                contentHTML = `<div class="mt-6 space-y-4">`;
                data.zones.forEach(zone => {
                    contentHTML += `
                        <div id="${zone.id}" class="zone-accordion">
                            <div class="zone-header" onclick="toggleZone('${zone.id}')">
                                <div class="flex items-center space-x-3 text-[#000078]">
                                    <i class="fas ${zone.icon} text-xs opacity-50"></i>
                                    <h4 class="text-sm font-black uppercase tracking-tight">${zone.name}</h4>
                                </div>
                                <i class="fas fa-chevron-down text-[10px] text-slate-300 transition-transform duration-300 chevron-icon"></i>
                            </div>
                            <div class="zone-body p-6">
                                <div class="grid grid-cols-1 gap-4">
                                    ${zone.services.map(service => `
                                        <div class="service-card">
                                            <h5 class="text-[10px] font-black text-uoc-blue uppercase mb-2 flex items-center">
                                                <span class="w-1.5 h-1.5 bg-uoc-sky rounded-full mr-2"></span>
                                                ${service.title}
                                            </h5>
                                            <p class="text-[12px] leading-relaxed text-slate-600 font-medium">${service.description}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>`;
                });
                contentHTML += `</div>`;
            } else {
                contentHTML = `<div class="mt-6 space-y-4">`;
                data.services.forEach(service => {
                    contentHTML += `
                        <div class="service-card bg-slate-50 border-2 border-slate-100 p-8">
                            <h5 class="text-xs font-black text-uoc-blue uppercase mb-4 tracking-wider flex items-center">
                                <i class="fas fa-info-circle mr-2 text-uoc-sky"></i>
                                ${service.title}
                            </h5>
                            <p class="text-sm leading-relaxed text-slate-500 font-medium">
                                ${service.description}
                            </p>
                        </div>`;
                });
                contentHTML += `</div>`;
            }

            const subtitleHTML = data.subtitle ? `
                <span class="text-[11px] font-black text-uoc-sky uppercase tracking-[0.2em] block -mt-1 mb-2">${data.subtitle}</span>
            ` : '';

            dynamicView.innerHTML = `
                <div class="space-y-6 animate-fadeIn">
                    <div class="relative h-56 w-full rounded-2xl overflow-hidden shadow-sm border-4 border-white">
                        <img src="${data.image}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/800x400?text=${data.title}'">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#000078]/90 via-transparent to-transparent"></div>
                        <div class="absolute bottom-4 left-6 text-white">
                            <span class="text-[10px] font-black text-uoc-sky/80 uppercase tracking-widest block mb-1">${data.label}</span>
                            <h2 class="text-2xl font-black uppercase tracking-tight">${data.title}</h2>
                            ${subtitleHTML}
                        </div>
                    </div>
                    ${contentHTML}
                </div>`;

            if (window.innerWidth < 1024) {
                window.scrollTo({ top: contentArea.offsetTop - 80, behavior: 'smooth' });
            }
        }

        function renderFloorButtons() {
            const list = document.getElementById('floor-list');
            if (!list) return;
            list.innerHTML = '';
            
            Object.keys(buildingData).forEach(id => {
                const data = buildingData[id];
                const btn = document.createElement('div');
                btn.id = `floor-btn-${id}`;
                btn.className = "floor-card";
                btn.onclick = () => selectFloor(id);
                btn.innerHTML = `
                    <img src="${data.image}" class="bg-image" onerror="this.src='https://via.placeholder.com/400x200?text=${data.label}'">
                    <div class="overlay"></div>
                    <div class="relative z-10 h-full p-6 flex flex-col justify-end text-white">
                        <span class="text-[9px] font-black uppercase tracking-widest text-uoc-sky/90 mb-0.5 drop-shadow-md">${data.label}</span>
                        <div class="flex items-center space-x-3">
                            <i class="fas ${data.icon} text-sm"></i>
                            <h3 class="text-lg font-black tracking-tight drop-shadow-lg uppercase">${data.title}</h3>
                        </div>
                    </div>`;
                list.appendChild(btn);
            });
        }

        function updateClock() {
            const clockEl = document.getElementById('real-time-clock');
            if(clockEl) clockEl.innerText = new Date().toLocaleTimeString('ca-ES');
        }

        window.onload = function() {
            renderFloorButtons();
            setInterval(updateClock, 1000);
            updateClock();
        };
        
        renderFloorButtons();
    </script>
</body>
</html>

